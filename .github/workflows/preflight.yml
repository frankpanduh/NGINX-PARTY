name: 💻 Preflight NGINX-PARTY

on:
  workflow_dispatch:
  pull_request:

jobs:
  preflight:
    runs-on: ubuntu-latest
    steps:
      - name: 📥 Checkout Repo
        uses: actions/checkout@v4

      - name: ⚙️ Install Build Dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y \
            build-essential \
            git \
            cmake \
            automake \
            autoconf \
            libtool \
            pkg-config \
            libpcre3-dev \
            libxml2-dev \
            libyajl-dev \
            liblmdb-dev \
            libssl-dev \
            libgeoip-dev \
            libcurl4-openssl-dev \
            doxygen \
            wget \
            zlib1g-dev \
            php8.3-cli \
            php8.3-fpm \
            mariadb-client \
            composer \
            redis-server \
            ccache \
            unzip \
            tar
      - name: ✅ Verify Toolchain
        run: |
          gcc --version
          cmake --version
          php -v
          redis-server --version