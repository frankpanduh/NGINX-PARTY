name: "‚ö° NGINX-PARTY Preflight Checks üõ°Ô∏è"

on:
  workflow_dispatch:

jobs:
  preflight:
    runs-on: ubuntu-latest

    steps:
      - name: "üåê Checkout Repository"
        uses: actions/checkout@v4

      - name: "üß∞ Verify System Dependencies"
        run: |
          echo "Checking required tools..."
          for tool in gcc make git wget tar ccache curl; do
            if ! command -v $tool &>/dev/null; then
              echo "‚ùå Missing $tool"
              exit 1
            fi
            echo "‚úÖ $tool installed"
          done

      - name: "üì¶ Verify Directories & Cache"
        run: |
          echo "Checking cache directories..."
          mkdir -p ~/.ccache
          echo "‚úÖ Cache directory ready"

      - name: "üîß Verify NGINX Source Directory"
        run: |
          if [ ! -d "nginx-${{ env.NGINX_VERSION }}-src" ]; then
            echo "‚ö†Ô∏è NGINX source not found, will be cloned in CI."
          else
            echo "‚úÖ NGINX source directory exists"
          fi